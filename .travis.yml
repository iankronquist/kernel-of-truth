# Make sure we run in the docker container
sudo: false
language: c
dist: trusty
addons:
    apt:
        packages:
            - python-virtualenv
            - libclang1-3.4
            - clang
            - yasm
            - xorriso
            - grub2
            - llvm

before_script:
    - virtualenv ~/venv
    - source ~/venv/bin/activate
    - pip install cldoc

script:
    - make debug CC=gcc AS=gcc LD=gcc
    - make clean
    - make release CC=gcc AS=gcc LD=gcc
    - make iso
    - make clean
    - scan-build --status-bugs make CC=gcc AS=gcc LD=gcc
